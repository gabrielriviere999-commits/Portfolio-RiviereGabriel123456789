# üìò Documentation : Installation et Configuration d‚ÄôApache Guacamole avec JDBC

## 1. Pr√©-requis
- Ubuntu 24.04 LTS
- Tomcat 9 install√© dans /opt/tomcat9
- MariaDB install√© et fonctionnel
- Paquet guacd (daemon Guacamole) install√©

---

## 2. D√©ploiement du client Guacamole
1. Supprimer les anciens fichiers :
sudo rm -rf /opt/tomcat9/webapps/guacamole*

2. T√©l√©charger le .war :
cd /tmp
wget https://downloads.apache.org/guacamole/1.5.5/binary/guacamole-1.5.5.war

3. Copier dans Tomcat :
sudo cp /tmp/guacamole-1.5.5.war /opt/tomcat9/webapps/guacamole.war

4. Red√©marrer Tomcat :
tomcat9-stop
tomcat9-start

üëâ V√©rifier que le dossier /opt/tomcat9/webapps/guacamole/ est cr√©√© et que l‚Äôinterface est accessible via :
http://<IP_SERVEUR>:8080/guacamole/

---

## 3. Installation de MariaDB
sudo apt install mariadb-server
sudo systemctl enable --now mariadb
sudo mysql_secure_installation

### Cr√©ation de la base et de l‚Äôutilisateur
CREATE DATABASE guacadb;
CREATE USER 'guaca_nachos'@'localhost' IDENTIFIED BY 'TonMotDePasse';
GRANT SELECT,INSERT,UPDATE,DELETE ON guacadb.* TO 'guaca_nachos'@'localhost';
FLUSH PRIVILEGES;

---

## 4. Extension JDBC et Connecteur MySQL
### Cr√©er les dossiers :
sudo mkdir -p /etc/guacamole/extensions
sudo mkdir -p /etc/guacamole/lib

### T√©l√©charger et installer l‚Äôextension JDBC :
cd /tmp
wget https://downloads.apache.org/guacamole/1.5.5/binary/guacamole-auth-jdbc-1.5.5.tar.gz
tar -xzf guacamole-auth-jdbc-1.5.5.tar.gz
sudo cp guacamole-auth-jdbc-1.5.5/mysql/guacamole-auth-jdbc-mysql-1.5.5.jar /etc/guacamole/extensions/

### T√©l√©charger et installer le connecteur MySQL :
cd /tmp
wget https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-j-9.1.0.tar.gz
tar -xzf mysql-connector-j-9.1.0.tar.gz
sudo cp mysql-connector-j-9.1.0/mysql-connector-j-9.1.0.jar /etc/guacamole/lib/

---

## 5. Import du sch√©ma SQL
cd /tmp/guacamole-auth-jdbc-1.5.5/mysql/schema/
cat *.sql | sudo mysql guacadb

üëâ V√©rification :
USE guacadb;
SHOW TABLES;
Tu dois voir 23 tables (guacamole_user, guacamole_connection, etc.).

---

## 6. Configuration de Guacamole
sudo nano /etc/guacamole/guacamole.properties
mysql-hostname: 127.0.0.1
mysql-port: 3306
mysql-database: guacadb
mysql-username: guaca_nachos
mysql-password: TonMotDePasse

---

## 7. Red√©marrage des services
tomcat9-stop
tomcat9-start
sudo systemctl restart guacd mariadb

---

## 8. Connexion par d√©faut
Acc√©der √† :
http://<IP_SERVEUR>:8080/guacamole/

Identifiants initiaux :  
- Login : guacadmin
- Mot de passe : guacadmin 

‚ö†Ô∏è Change imm√©diatement ce mot de passe apr√®s la premi√®re connexion.

---

## 9. √âtapes post-installation
- Cr√©er tes propres utilisateurs.
- Ajouter des connexions RDP/SSH/VNC via l‚Äôinterface web.
- (Optionnel) Configurer un reverse proxy Nginx/Apache pour HTTPS.
